<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transaction Management System</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="alerts"></div>
    <div class="container">
        <header>
            <h1>Transaction Management System</h1>
        </header>

        <nav>
            <button onclick="showSection('new-transaction')">New Transaction</button>
            <button onclick="showSection('search-transactions')">Search Transactions</button>
            <button onclick="showSection('transaction-list')">All Transactions</button>
        </nav>

        <main>
            <section id="new-transaction" class="section">
                <h2>New Transaction</h2>
                <div class="customer-search">
                    <div class="search-box">
                        <select id="search-type" onchange="handleSearchInput()">
                            <option value="all">Search All Fields</option>
                            <option value="customerName">Search by Name</option>
                            <option value="customerId">Search by ID</option>
                            <option value="mobile">Search by Mobile</option>
                            <option value="referralId">Search by Referral ID</option>
                        </select>
                        <input type="text" 
                               id="customer-search-input" 
                               placeholder="Start typing to search..." 
                               oninput="handleSearchInput()"
                               autocomplete="off">
                    </div>
                    <div id="search-results-dropdown" class="search-results-dropdown hidden"></div>
                </div>
                
                <form id="transaction-form" onsubmit="handleNewTransaction(event)">
                    <div class="customer-details">
                        <h3>Customer Details</h3>
                        <div class="form-group">
                            <label for="transactionDate">Transaction Date:</label>
                            <input type="date" id="transactionDate">
                        </div>
                        <div class="form-group">
                            <label for="customerName">Customer Name:</label>
                            <input type="text" id="customerName" required>
                        </div>
                        <div class="form-group">
                            <label for="customerId">Customer ID:</label>
                            <div class="input-with-button">
                                <input type="text" id="customerId" required>
                                <button type="button" onclick="generateAndSetCustomerId()">Generate ID</button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="referralId">Referral ID:</label>
                            <div class="input-with-button">
                                <input type="text" id="referralId" required>
                                <button type="button" onclick="generateAndSetReferralId()">Generate ID</button>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="mobile">Mobile:</label>
                            <input type="tel" id="mobile" required>
                        </div>
                        <div class="form-group">
                            <label for="referredBy">Referred By:</label>
                            <input type="text" id="referredBy">
                        </div>
                        <div class="form-group">
                            <label for="referredCustomerId1">Referred Customer ID 1:</label>
                            <input type="text" id="referredCustomerId1">
                        </div>
                        <div class="form-group">
                            <label for="referredCustomerId2">Referred Customer ID 2:</label>
                            <input type="text" id="referredCustomerId2">
                        </div>
                        <hr class="section-divider">
                        <h3>Product Details</h3>
                        <div id="products-container">
                            <!-- Product entries will be added here -->
                        </div>
                        <button type="button" class="secondary-button" onclick="addProductEntry()">Add Product</button>
                        
                        <div class="total-section">
                            <h4>Total Amount: <span id="total-amount">â‚¹0.00</span></h4>
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" class="primary-button">Save Transaction</button>
                        </div>
                    </div>
                </form>
            </section>

            <section id="search-transactions" class="section hidden">
                <h2>Search Transactions</h2>
                <div class="search-controls">
                    <select id="search-type">
                        <option value="customerName">Customer Name</option>
                        <option value="customerId">Customer ID</option>
                        <option value="referralId">Referral ID</option>
                        <option value="date">Date</option>
                    </select>
                    <input type="text" id="search-input" placeholder="Enter search term">
                    <button onclick="searchTransactions()">Search</button>
                </div>
                <div id="search-results" class="results-container"></div>
            </section>

            <section id="transaction-list" class="section hidden">
                <h2>All Transactions</h2>
                <div id="all-transactions" class="results-container"></div>
            </section>
        </main>
    </div>
    <script src="script.js"></script>
</body>
</html>
